# components
loadrt conv_s32_float count=1 
loadrt conv_float_s32 count=1 
loadrt sphereprobe 
loadrt motorsim count=1 
loadrt spindlemotor count=1 
loadrt encoder num_chan=6 
loadrt sim_encoder num_chan=3 
loadrt wcomp count=9 
loadrt lowpass count=3 
loadrt scale count=3 
loadrt ddt count=6 
loadrt pid num_chan=3 
loadrt motmod base_period_nsec=50000 servo_period_nsec=1000000 num_joints=3 
loadrt trivkins 
# pin aliases
# param aliases
# signals
newsig tool-change-loop bit  
# nets
net MDI-Z-up pyvcp.MDI-z_up => halui.mdi-command-00
net MDI-clear-offset pyvcp.MDI-clear-offset => halui.mdi-command-05
net MDI-reference-pos pyvcp.MDI-reference => halui.mdi-command-01
net MDI-zero_X pyvcp.MDI-zerox => halui.mdi-command-02
net MDI-zero_Y pyvcp.MDI-zeroy => halui.mdi-command-03
net MDI-zero_Z pyvcp.MDI-zeroz => halui.mdi-command-04
net Xacc ddt.1.out
net Xaxis-pos encoder.3.position => wcomp.0.in wcomp.1.in wcomp.2.in
net Xenable axis.0.amp-enable-out => pid.0.enable
net Xhome wcomp.2.out => axis.0.home-sw-in
net Xindex-enable axis.0.index-enable <=> encoder.0.index-enable => pid.0.index-enable
net Xmaxlim wcomp.1.out => axis.0.pos-lim-sw-in
net Xminlim wcomp.0.out => axis.0.neg-lim-sw-in
net Xmtr-cmd scale.0.out => lowpass.0.in
net Xmtr-spd lowpass.0.out => sim-encoder.0.speed
net Xoutput pid.0.output => scale.0.in
net XphA sim-encoder.0.phase-A => encoder.0.phase-A encoder.3.phase-A
net XphB sim-encoder.0.phase-B => encoder.0.phase-B encoder.3.phase-B
net XphZ sim-encoder.0.phase-Z => encoder.0.phase-Z
net Xpos-cmd axis.0.motor-pos-cmd => pid.0.command
net Xpos-fb encoder.0.position => axis.0.motor-pos-fb pid.0.feedback
net Xvel ddt.0.out => ddt.1.in
net Yacc ddt.3.out
net Yaxis-pos encoder.4.position => wcomp.3.in wcomp.4.in wcomp.5.in
net Yenable axis.1.amp-enable-out => pid.1.enable
net Yhome wcomp.5.out => axis.1.home-sw-in
net Yindex-enable axis.1.index-enable <=> encoder.1.index-enable
net Ymaxlim wcomp.4.out => axis.1.pos-lim-sw-in
net Yminlim wcomp.3.out => axis.1.neg-lim-sw-in
net Ymtr-cmd scale.1.out => lowpass.1.in
net Ymtr-spd lowpass.1.out => sim-encoder.1.speed
net Youtput pid.1.output => scale.1.in
net YphA sim-encoder.1.phase-A => encoder.1.phase-A encoder.4.phase-A
net YphB sim-encoder.1.phase-B => encoder.1.phase-B encoder.4.phase-B
net YphZ sim-encoder.1.phase-Z => encoder.1.phase-Z
net Ypos-cmd axis.1.motor-pos-cmd => pid.1.command
net Ypos-fb encoder.1.position => axis.1.motor-pos-fb pid.1.feedback
net Yvel ddt.2.out => ddt.3.in
net Zacc ddt.5.out
net Zaxis-pos encoder.5.position => wcomp.6.in wcomp.7.in wcomp.8.in
net Zenable axis.2.amp-enable-out => pid.2.enable
net Zhome wcomp.8.out => axis.2.home-sw-in
net Zindex-enable axis.2.index-enable <=> encoder.2.index-enable
net Zmaxlim wcomp.7.out => axis.2.pos-lim-sw-in
net Zminlim wcomp.6.out => axis.2.neg-lim-sw-in
net Zmtr-cmd scale.2.out => lowpass.2.in
net Zmtr-spd lowpass.2.out => sim-encoder.2.speed
net Zoutput pid.2.output => scale.2.in
net ZphA sim-encoder.2.phase-A => encoder.2.phase-A encoder.5.phase-A
net ZphB sim-encoder.2.phase-B => encoder.2.phase-B encoder.5.phase-B
net ZphZ sim-encoder.2.phase-Z => encoder.2.phase-Z
net Zpos-cmd axis.2.motor-pos-cmd => pid.2.command
net Zpos-fb encoder.2.position => axis.2.motor-pos-fb pid.2.feedback
net Zvel ddt.4.out => ddt.5.in
net dummy-reverse motion.spindle-reverse
net estop-loop iocontrol.0.user-enable-out => iocontrol.0.emc-enable-in
net jog-speed pyvcp.jog-speed
net jog-x-neg pyvcp.jog-x-
net jog-x-pos pyvcp.jog-x+
net jog-y-neg pyvcp.jog-y-
net jog-y-pos pyvcp.jog-y+
net jog-z-neg pyvcp.jog-z-
net jog-z-pos pyvcp.jog-z+
net optional-stp-is-on halui.program.optional-stop.is-on => pyvcp.ostop-is-on
net optional-stp-off pyvcp.ostop-off => halui.program.optional-stop.off
net optional-stp-on pyvcp.ostop-on => halui.program.optional-stop.on
net probe-out sphereprobe.0.probe-out => encoder.0.latch-input encoder.1.latch-input encoder.2.latch-input motion.probe-input
net program-pause pyvcp.pause => halui.program.pause
net program-resume pyvcp.resume => halui.program.resume
net program-single-step pyvcp.step => halui.program.step
net px encoder.0.rawcounts => sphereprobe.0.px
net py encoder.1.rawcounts => sphereprobe.0.py
net pz encoder.2.rawcounts => sphereprobe.0.pz
net spindle-at-speed spindlemotor.0.at-speed => motion.spindle-at-speed
net spindle-enc-fb motorsim.0.output => spindlemotor.0.actual-speed
net spindle-enc-revs motorsim.0.pos => spindlemotor.0.motor-pos-in
net spindle-forward spindlemotor.0.forward => motorsim.0.forward
net spindle-reverse spindlemotor.0.reverse => motorsim.0.reverse
net spindle-revs spindlemotor.0.spindle-pos-out => motion.spindle-revs
net spindle-vel-fb spindlemotor.0.spindle-rpm => motion.spindle-speed-in
net spindle-vel-output spindlemotor.0.output => motorsim.0.commanded-speed
net tool-change iocontrol.0.tool-change => hal_manualtoolchange.change
net tool-changed hal_manualtoolchange.changed => iocontrol.0.tool-changed
net tool-prep-loop iocontrol.0.tool-prepare => iocontrol.0.tool-prepared
net tool-prep-number iocontrol.0.tool-prep-number => hal_manualtoolchange.number
net xflt axis.0.amp-fault-in
net yflt axis.1.amp-fault-in
net zflt axis.2.amp-fault-in
# parameter values
setp conv-float-s32.0.clamp        FALSE
setp conv-float-s32.0.tmax         2129
setp conv-s32-float.0.tmax          480
setp ddt.0.tmax         1642
setp ddt.1.tmax         1965
setp ddt.2.tmax         1043
setp ddt.3.tmax         7654
setp ddt.4.tmax         1265
setp ddt.5.tmax         1090
setp encoder.capture-position.tmax        11930
setp encoder.update-counters.tmax         7765
setp lowpass.0.gain          0.1
setp lowpass.0.tmax         7053
setp lowpass.1.gain          0.1
setp lowpass.1.tmax         1141
setp lowpass.2.gain          0.1
setp lowpass.2.tmax         1289
setp motion-command-handler.tmax         6349
setp motion-controller.tmax        46650
setp motion.servo.overruns   0x00000000
setp motorsim.0.accel          500
setp motorsim.0.tmax         2438
setp pid.0.do-pid-calcs.tmax         6520
setp pid.1.do-pid-calcs.tmax         3106
setp pid.2.do-pid-calcs.tmax         7250
setp scale.0.tmax         4869
setp scale.1.tmax         1297
setp scale.2.tmax         1348
setp sim-encoder.make-pulses.tmax         3844
setp sim-encoder.update-speed.tmax         5978
setp sphereprobe.0.tmax         3538
setp spindlemotor.0.accel          500
setp spindlemotor.0.decel          500
setp spindlemotor.0.speed-tolerance          1.1
setp spindlemotor.0.spindle-lpf            1
setp spindlemotor.0.tmax         7792
setp spindlemotor.0.zero-tolerance         0.01
setp wcomp.0.tmax         2620
setp wcomp.1.tmax         1327
setp wcomp.2.tmax         1360
setp wcomp.3.tmax         1597
setp wcomp.4.tmax         1694
setp wcomp.5.tmax         1821
setp wcomp.6.tmax         2113
setp wcomp.7.tmax         1661
setp wcomp.8.tmax         1375
# realtime thread/function links
addf spindlemotor.0 servo-thread
addf motorsim.0 servo-thread
addf encoder.capture-position servo-thread
addf wcomp.0 servo-thread
addf wcomp.1 servo-thread
addf wcomp.2 servo-thread
addf wcomp.3 servo-thread
addf wcomp.4 servo-thread
addf wcomp.5 servo-thread
addf wcomp.6 servo-thread
addf wcomp.7 servo-thread
addf wcomp.8 servo-thread
addf motion-command-handler servo-thread
addf motion-controller servo-thread
addf pid.0.do-pid-calcs servo-thread
addf pid.1.do-pid-calcs servo-thread
addf pid.2.do-pid-calcs servo-thread
addf scale.0 servo-thread
addf scale.1 servo-thread
addf scale.2 servo-thread
addf lowpass.0 servo-thread
addf lowpass.1 servo-thread
addf lowpass.2 servo-thread
addf sim-encoder.update-speed servo-thread
addf ddt.0 servo-thread
addf ddt.1 servo-thread
addf ddt.2 servo-thread
addf ddt.3 servo-thread
addf ddt.4 servo-thread
addf ddt.5 servo-thread
addf conv-float-s32.0 servo-thread
addf conv-s32-float.0 servo-thread
addf sim-encoder.make-pulses base-thread
addf sphereprobe.0 base-thread
addf encoder.update-counters base-thread
